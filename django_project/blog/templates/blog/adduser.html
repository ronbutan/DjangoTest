{% extends "blog/base.html" %}
{% block content %}
    <h1>Add new user</h1>
    <hr/>
    <div>
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mb-3">
                <label for="txtUserName" class="form-label">UserName</label>
                <input type="text" class="form-control" id="txtUserName" aria-describedby="usernameHelp" name="username">
                <div id="usernameHelp" class="form-text"></div>
            </div>
            <div class="mb-3">
                <label for="txtFirstName" class="form-label">First Name</label>
                <input type="text" class="form-control" id="txtFirstName" name="first_name">
            </div>
            <div class="mb-3">
                <label for="txtLastName" class="form-label">Last Name</label>
                <input type="text" class="form-control" id="txtLastName" name="last_name">
            </div>
            <div class="mb-3">
                <label for="txtPassword" class="form-label">Password</label>
                <input type="password" class="form-control" id="txtPassword" name="password">
            </div>
            <div class="mb-3">
                <label for="txtConfirmPassword" class="form-label">Confirm Password</label>
                <input type="password" class="form-control" id="txtConfirmPassword" name="confirmpassword">
            </div>
            <div class="mb-3">
                <label for="txtDob" class="form-label">Birthdate</label>
                <input type="date" class="form-control" id="txtDob" name="dob">
            </div>
            <div class="mb-3">
                <label for="txtEmail" class="form-label">Email</label>
                <input type="email" class="form-control" id="txtEmail" name="email">
            </div>
            <div class="input-group mb-3">
                <input type="file" name="image_file" class="file" accept="image/*">
                <input type="text" class="form-control" disabled placeholder="Upload File" id="file">
                <div class="input-group-append">
                    <button type="button" class="browse btn btn-primary">Browse...</button>
                </div>
            </div>
            <div class="ml-2 col-sm-6">
                <img src="https://placehold.it/80x80" id="preview" class="img-thumbnail"/>
            </div>

            <input type="submit" class="btn btn-primary" value="Sign Up"/>
        </form>
    </div>
    <script type="text/javascript">
        $(document).on("click", ".browse", function() {
          var file = $(this).parents().find(".file");
          file.trigger("click");
        });
        $('input[type="file"]').change(function(e) {
          var fileName = e.target.files[0].name;
          $("#file").val(fileName);
        
          var reader = new FileReader();
          reader.onload = function(e) {
            // get loaded data and render thumbnail.
            document.getElementById("preview").src = e.target.result;
          };
          // read the image file as a data URL.
          reader.readAsDataURL(this.files[0]);
        });
    </script>
{% endblock content%}
